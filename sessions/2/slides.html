<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=1024, user-scalable=no">

  <title>Tests unitaires et TDD en C++ avec GoogleTest</title>

  <!-- Required stylesheet -->
  <link rel="stylesheet" media="screen" href="../deck.js/core/deck.core.css">

  <!-- Extension CSS files go here. Remove or add as needed. -->
  <link rel="stylesheet" media="screen" href="../deck.js/extensions/goto/deck.goto.css">
  <link rel="stylesheet" media="screen" href="../deck.js/extensions/menu/deck.menu.css">
  <link rel="stylesheet" media="screen" href="../deck.js/extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" media="screen" href="../deck.js/extensions/status/deck.status.css">
  <link rel="stylesheet" media="screen" href="../deck.js/extensions/scale/deck.scale.css">

  <!-- Style theme. More available in /themes/style/ or create your own. -->
  <link rel="stylesheet" media="screen" href="../deck.js/themes/style/ingima.css">

  <!-- Transition theme. More available in /themes/transition/ or create your own. -->
  <link rel="stylesheet" media="screen" href="../deck.js/themes/transition/horizontal-slide.css">

  <!-- Basic black and white print styles -->
  <link rel="stylesheet" media="print" href="../deck.js/core/print.css">

  <!-- prism.js -->
  <link rel="stylesheet" href="../prism.js/prism.css">

  <!-- Required Modernizr file -->
  <script src="../deck.js/modernizr.custom.js"></script>
</head>
<body class="language-cpp">

  <header>
    <img src="../media/ingima-logo.png" class="logo">
  </header>

  <div class="home">

    <article class="deck-container">

  <!--
  #########################################################################################################
  # Content
  #########################################################################################################
  -->

      <section class="slide">
        <h1>
          Tests unitaires et<br>TDD en C++<br>avec GoogleTest<br>
          <small>Session n°2</small>
        </h1>
      </section>

      <section class="slide">
        <h2>Session n°2</h2>
        <ol>
          <li><h3>Fonctionnalités avancées de GoogleTest</h3></li>
          <li><h3>GoogleMock Framework</h3></li>
          <li><h3>Etude de cas pratique</h3></li>
        </ol>
      </section>
      
      <section class="slide">
        <h1>Fonctionnalités avancées<br>de GoogleTest</h1>
      </section>
      
      <!--
            <ul>
              <li>Comparaison de flottants</li>
              <li>Gestion d'exceptions</li>
              <li>Utilisation de prédicats</li>
              <li>Tests paramétrés</li>
              <li>Tests typés</li>
              <li>Tester du code privé</li>
            </ul>
            -->

      <section class="slide">
        <h2>GoogleTest avancé</h2>
        <section>
          <h3>Comparaison de flottants</h3>
          <p>
            <table>
              <thead>
                <tr><th>Assertion</th><th>Attente</th><th>Vérifie que</th></tr>
              </thead>
              <tbody>
                <tr class="slide"><td><code>ASSERT_FLOAT_EQ(val1, val2);</code></td><td><code>EXPECT_FLOAT_EQ(val1, val2);</code></td><td>Les deux valeurs <em>float</em> sont presque égales.</td></tr>
                <tr class="slide"><td><code>ASSERT_DOUBLE_EQ(val1, val2);</code></td><td><code>EXPECT_DOUBLE_EQ(val1, val2);</code></td><td>Les deux valeurs <em>double</em> sont presque égales.</td></tr>
                <tr class="slide"><td><code>ASSERT_NEAR(val1, val2, eps);</code></td><td><code>EXPECT_NEAR(val1, val2, eps);</code></td><td>La différence entre les deux valeurs n'excède pas <em>eps</em>.</td></tr>
              </tbody>
            </table>
          </p>
          <p>
            Presque égales &hArr; max 4 <strong>ULP</strong> (<em>Units in the Last Place</em>) de différence.<br>
            Plus de détails : <cite><a href="https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/">https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/</a>.
          </p>
        </section>
      </section>

      <section class="slide">
        <h2>GoogleTest avancé (2)</h2>
        <section>
          <h3>Gestion d'exceptions</h3>
          <p>
            <table>
              <thead>
                <tr><th>Assertion</th><th>Attente</th><th>Vérifie que</th></tr>
              </thead>
              <tbody>
                <tr class="slide"><td><code>ASSERT_THROW(stat, type);</code></td><td><code>EXPECT_THROW(stat, type);</code></td><td>L'instruction <em>stat</em> lève une exception de type <em>type</em>.</td></tr>
                <tr class="slide"><td><code>ASSERT_ANY_THROW(stat);</code></td><td><code>EXPECT_ANY_THROW(stat);</code></td><td>L'instruction <em>stat</em> lève une exception de n'importe quel type.</td></tr>
                <tr class="slide"><td><code>ASSERT_NO_THROW(stat);</code></td><td><code>EXPECT_NO_THROW(stat);</code></td><td>L'instruction <em>stat</em> ne lève <strong>pas</strong> d'exception.</td></tr>
              </tbody>
            </table>
          </p>
        </section>
      </section>

      <section class="slide">
        <h2>GoogleTest avancé (3)</h2>
        <section>
          <h3>Cas pratique (<em>matrix</em>)</h3>
          <h4>Multiplication de matrices carrées de <em>double</em></h4>
          <p>
            Implémenter une fonction qui calcule la multiplication de deux matrices carrées de <em>double</em>.<br>
            Si les matrices ne peuvent pas être multipliés (tailles incohérentes, valeurs invalides <em>NaN</em>, etc), une exception sera levée.
          </p>
          <p><img src="../media/matrix.jpg" style="width: 30%"></p>
        </section>
      </section>

      <section class="slide">
        <h2>GoogleTest avancé (4)</h2>
        <section>
          <h3>Prédicats</h3>
          <section>
            <p>
              Fonction le plus souvent <strong>unaire</strong> (1 argument) ou <strong>binaire</strong> (2 arguments) retournant un <em>booléen</em>.
            </p>
            <p>
              <strong>Exemples</strong>:
              <ul>
                <li>Unaire: <code>[](int n) { return n &lt; 0; }</code></li>
                <li>Binaire: <code>std::less<int>()</code></li>
              </ul>
            </p>
          </section>
          <section class="slide">
            <table>
              <thead>
                <tr><th>Assertion</th><th>Attente</th><th>Vérifie que</th></tr>
              </thead>
              <tbody>
                <tr class="slide"><td><code>ASSERT_PRED1(pred1, val1);</code></td><td><code>EXPECT_PRED1(pred1, val1);</code></td><td><em>pred1(val1)</em> retourne vrai.</td></tr>
                <tr class="slide"><td><code>ASSERT_PRED2(pred2, val1, val2);</code></td><td><code>EXPECT_PRED2(pred2, val1, val2);</code></td><td><em>pred2(val1, val2)</em> retourne vrai.</td></tr>
                <tr class="slide"><td><code>ASSERT_PRED3(pred3, val1, val2, val3);</code></td><td><code>EXPECT_PRED3(pred3, val1, val3);</code></td><td><em>pred3(val1, val2, val3)</em> retourne vrai.</td></tr>
                <tr class="slide"><td>...</td><td>...</td><td>...</td></tr>
              </tbody>
            </table>
          </section>
          <section class="slide">
            <strong>Utilisation</strong>:
            <pre><code>bool canDivide(int num, int den)
{
  return num % den == 0;
}

int val1 = 42;
int val2 = 6;
ASSERT_PRED2(canDivide, val1, val2);</code></pre>
          </section>
        </section>
      </section>
      
      <section class="slide">
        <h2>GoogleTest avancé (5)</h2>
        <section>
          <h3>Prédicats (2)</h3>
          <h4>Alternative</h4>
          <section class="slide">
            <h5>Problème</h5>
            <pre><code>bool all(bool... args)
{
  return (args && ...);
}</code></pre>
          </section>
          <section class="slide">
            <h5>Solution</h5>
            <pre><code>namespace testing {

// Returns an AssertionResult object to indicate that an assertion has
// succeeded.
AssertionResult AssertionSuccess();

// Returns an AssertionResult object to indicate that an assertion has
// failed.
AssertionResult AssertionFailure();

}</code></pre>
          </section>
          <section class="slide">
            <h5>Utilisation</h5>
            <pre><code>::testing::AssertionResult testAll(bool... args)
{
  if (all(args...))
  {
    return ::testing::AssertionSuccess();
  }
  else
  {
    return ::testing::AssertionFailure() &lt;&lt; "one of them is false";
  }
}

EXPECT_TRUE(testAll(false, true, true, false, true));
</code></pre>
          </section>
        </section>
      </section>
      
      <section class="slide">
        <h2>GoogleTest avancé (5)</h2>
        <section>
          <h3>Tests paramétrés</h3>
          <p>
          TODO
          </p>
        </section>
      </section>
      
      <section class="slide">
        <h2>GoogleTest avancé (6)</h2>
        <section>
          <h3>Tests typés</h3>
          <p>
          TODO
          </p>
        </section>
      </section>
      
      <section class="slide">
        <h2>GoogleTest avancé (7)</h2>
        <section>
          <h3>Tester du code privé</h3>
          <p>
          TODO
          </p>
        </section>
      </section>
      
      <section class="slide">
        <h1>GoogleMock framework</h1>
      </section>
      
      <section class="slide">
        <h2>GoogleMock</h2>
        <section>
          <h3>Définition</h3>
          <p>
          TODO
          </p>
        </section>
      </section>

      <section class="slide">
        <h2>GoogleMock (2)</h2>
        <section>
          <h3>Mock d'une classe</h3>
          <p>
          TODO
          </p>
        </section>
      </section>

      <section class="slide">
        <h2>GoogleMock (3)</h2>
        <section>
          <h3>Utilisation</h3>
          <p>
          TODO
          </p>
        </section>
      </section>
      
      <section class="slide">
        <h2>GoogleMock (4)</h2>
        <section>
          <h3>Matching d'arguments</h3>
          <p>
          TODO
          </p>
        </section>
      </section>
      
      <section class="slide">
        <h2>GoogleMock (5)</h2>
        <section>
          <h3>Valeurs de retours</h3>
          <p>
          TODO
          </p>
        </section>
      </section>
      
      <section class="slide">
        <h2>GoogleMock (5)</h2>
        <section>
          <h3>Cas pratique (<em>interpreter</em>)</h3>
          <h4>Interpréteur de chaîne de caractères</h4>
          <p>
            Implémenter la méthode de la classe <code>intpt::Interpreter</code> nommée <code>void interpret(const std::string& txt)</code>.<br>
            Cette méthode utilise un <code>intpt::AbstractParser</code> pour <em>parser</em> le texte et utilise ce résultat pour agir sur un <code>intpt::AbstractActor</code>.
          </p>
          <p><img src="../media/interprete.jpg" style="width: 30%"></p>
        </section>
      </section>
      
      <section class="slide">
        <h1>Prochaine session</h1>
      </section>

      <section class="slide">
        <h2>Prochaine session</h2>
        <h3 class="vcenter">Cas pratique en groupe et/ou techniques avancées de GoogleMock.</h3>
      </section>

  <!--
  #########################################################################################################
  # End of content
  #########################################################################################################
  -->

      <!-- Begin extension snippets. Add or remove as needed. -->

      <!-- deck.navigation snippet -->
      <div aria-role="navigation">
        <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
        <a href="#" class="deck-next-link" title="Next">&#8594;</a>
      </div>

      <!-- deck.status snippet -->
      <p class="deck-status" aria-role="status">
        <span class="deck-status-current"></span>
        /
        <span class="deck-status-total"></span>
      </p>

      <!-- deck.goto snippet -->
      <form action="." method="get" class="goto-form">
        <label for="goto-slide">Go to slide:</label>
        <input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
        <datalist id="goto-datalist"></datalist>
        <input type="submit" value="Go">
      </form>

      <!-- End extension snippets. -->

    </article>

  </div>

  <footer>
    <h3>Vincent PALANCHER - vincent.palancher@gmail.com</h3>
  </footer>

  <!-- Required JS files. -->
  <script src="../deck.js/jquery.min.js"></script>
  <script src="../deck.js/core/deck.core.js"></script>

  <!-- Extension JS files. Add or remove as needed. -->
  <script src="../deck.js/extensions/menu/deck.menu.js"></script>
  <script src="../deck.js/extensions/goto/deck.goto.js"></script>
  <script src="../deck.js/extensions/status/deck.status.js"></script>
  <script src="../deck.js/extensions/navigation/deck.navigation.js"></script>
  <script src="../deck.js/extensions/scale/deck.scale.js"></script>

  <!-- Initialize the deck. You can put this in an external file if desired. -->
  <script>
    $(function() {
      $.deck('.slide');
    });
  </script>

  <!-- prism.js -->
  <script src="../prism.js/prism.js"></script>

</body>
</html>
